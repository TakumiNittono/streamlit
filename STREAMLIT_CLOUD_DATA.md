# Streamlit Cloudã§ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã«ã¤ã„ã¦

## ğŸ“ ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å ´æ‰€

Streamlit Cloudã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸå ´åˆã€ãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼š

### 1. ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`docs/`ï¼‰

**ä¿å­˜å ´æ‰€**: Streamlit Cloudã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ‘ã‚¹: `/tmp/streamlit/` ã¾ãŸã¯ã‚¢ãƒ—ãƒªã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã® `docs/`
- **é‡è¦**: å†ãƒ‡ãƒ—ãƒ­ã‚¤ã‚„ã‚¢ãƒ—ãƒªã®å†èµ·å‹•ã§**æ¶ˆå»ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™**

### 2. Chroma DBï¼ˆ`chroma_db/`ï¼‰

**ä¿å­˜å ´æ‰€**: Streamlit Cloudã®ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ‘ã‚¹: ã‚¢ãƒ—ãƒªã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã® `chroma_db/`
- **é‡è¦**: å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§**æ¶ˆå»ã•ã‚Œã¾ã™**

## âš ï¸ é‡è¦ãªåˆ¶ç´„

### Streamlit Cloudã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹å¾´

1. **ä¸€æ™‚çš„**: ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸€æ™‚çš„ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã‚‹
2. **å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§æ¶ˆãˆã‚‹**: æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ãŒè¡Œã‚ã‚Œã‚‹ã¨ã€å‰ã®ãƒ‡ãƒ¼ã‚¿ã¯å¤±ã‚ã‚Œã‚‹
3. **ã‚µã‚¤ã‚ºåˆ¶é™**: ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ã¯åˆ¶é™ã‚ã‚Š

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ã‚’æ°¸ç¶šåŒ–ã™ã‚‹æ–¹æ³•

### æ–¹æ³•1: å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

#### A. Google Cloud Storage / AWS S3

```python
# ingest.py ã‚’ä¿®æ­£ã—ã¦ã€å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨
import boto3  # AWS S3ã®å ´åˆ
# ã¾ãŸã¯
from google.cloud import storage  # GCSã®å ´åˆ

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
# Chroma DBã‚‚å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
```

#### B. GitHubãƒªãƒã‚¸ãƒˆãƒªã«å«ã‚ã‚‹ï¼ˆå°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼‰

**æ³¨æ„**: å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯GitHubã®åˆ¶é™ã«å¼•ã£ã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™

```bash
# .gitignoreã‹ã‚‰é™¤å¤–ï¼ˆå°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼‰
# docs/ ã¨ chroma_db/ ã‚’Gitã«å«ã‚ã‚‹
git add docs/ chroma_db/
git commit -m "Add initial data"
git push
```

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã¯GitHubã®åˆ¶é™ã«å¼•ã£ã‹ã‹ã‚‹
- ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªãŒå¿…è¦ï¼ˆæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®å ´åˆï¼‰
- æ›´æ–°ã®ãŸã³ã«Git pushãŒå¿…è¦

### æ–¹æ³•2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨

#### PostgreSQL + pgvector

```python
# Chroma DBã®ä»£ã‚ã‚Šã«PostgreSQL + pgvectorã‚’ä½¿ç”¨
# Streamlit Cloudã®Add-onã§PostgreSQLã‚’è¿½åŠ 
```

### æ–¹æ³•3: Streamlit Secretsã§åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š

```toml
# .streamlit/secrets.tomlï¼ˆGitã«å«ã‚ãªã„ï¼‰
# å°è¦æ¨¡ãªåˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’Secretsã«ä¿å­˜
INITIAL_DOCS = """
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ1ã®å†…å®¹...
"""
```

## ğŸ¯ æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### å°è¦æ¨¡ãªãƒ‡ãƒ¢ãƒ»PoCã®å ´åˆ

1. **åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’Gitã«å«ã‚ã‚‹**
   ```bash
   # ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’docs/ã«è¿½åŠ 
   git add docs/sample1.txt docs/sample2.txt
   git commit -m "Add sample documents"
   git push
   ```

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸€æ™‚çš„**
   - å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§æ¶ˆãˆã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹
   - é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã¯å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜

### æœ¬ç•ªç’°å¢ƒã®å ´åˆ

1. **å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆS3/GCSï¼‰ã‚’ä½¿ç”¨**
2. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPostgreSQLç­‰ï¼‰ã‚’ä½¿ç”¨**
3. **å®šæœŸçš„ãªãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’è¨­å®š**

## ğŸ“ ç¾åœ¨ã®è¨­å®š

ç¾åœ¨ã®`.gitignore`è¨­å®šï¼š
- `docs/*` - ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯Gitã«å«ã‚ãªã„
- `chroma_db/` - Chroma DBã¯Gitã«å«ã‚ãªã„

**ã¤ã¾ã‚Š**:
- Streamlit Cloudã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸå ´åˆã€`docs/`ã¨`chroma_db/`ã¯ç©ºã®çŠ¶æ…‹ã§é–‹å§‹ã•ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸€æ™‚çš„ã«ä¿å­˜ã•ã‚Œã‚‹ãŒã€å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§æ¶ˆãˆã‚‹

## ğŸ”§ ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®å‹•ä½œ

1. **åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚**: `docs/`ã¨`chroma_db/`ã¯ç©º
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: `docs/`ã«ä¿å­˜ã•ã‚Œã€Chroma DBãŒä½œæˆã•ã‚Œã‚‹
3. **å†ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚**: `docs/`ã¨`chroma_db/`ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹

## ğŸ’¡ è§£æ±ºç­–ã®å®Ÿè£…ä¾‹

### ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Gitã«å«ã‚ã‚‹

```bash
# ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
echo "ã‚µãƒ³ãƒ—ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ1" > docs/sample1.txt
echo "ã‚µãƒ³ãƒ—ãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ2" > docs/sample2.txt

# .gitignoreã‚’ä¸€æ™‚çš„ã«ä¿®æ­£ã—ã¦ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å«ã‚ã‚‹
# docs/* ã®ä»£ã‚ã‚Šã« docs/*.txt ã‚’é™¤å¤–ï¼ˆ.gitkeepã¨sample*.txtã¯å«ã‚ã‚‹ï¼‰

git add docs/sample*.txt
git commit -m "Add sample documents"
git push
```

### å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸çµ±åˆï¼ˆå°†æ¥ã®æ‹¡å¼µï¼‰

```python
# ingest.py ã«å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¯¾å¿œã‚’è¿½åŠ 
def save_to_external_storage(file_path, content):
    # AWS S3ã‚„GCSã«ä¿å­˜
    pass

def load_from_external_storage():
    # å¤–éƒ¨ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
    pass
```

